# run_yolo_batch.sh æ—¥å¿—æœºåˆ¶å®Œæ•´è§£æ

## ğŸ“Š æ—¥å¿—æµå‘æ€»è§ˆ

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   run_yolo_batch.sh                         â”‚
â”‚                                                             â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 1. å‰å°è¾“å‡ºï¼ˆç»ˆç«¯æ˜¾ç¤ºï¼‰                             â”‚   â”‚
â”‚  â”‚    - è„šæœ¬å¯åŠ¨ä¿¡æ¯                                   â”‚   â”‚
â”‚  â”‚    - ä»»åŠ¡åˆ—è¡¨                                       â”‚   â”‚
â”‚  â”‚    - PID ä¿¡æ¯                                       â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 2. nohup åå°è¿›ç¨‹                                   â”‚   â”‚
â”‚  â”‚    â”œâ”€> ä¸´æ—¶è„šæœ¬ (/tmp/yolo_batch_*.sh)             â”‚   â”‚
â”‚  â”‚    â””â”€> é‡å®šå‘åˆ° ${BATCH_NAME}.log                  â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 3. ä¸²è¡Œæ‰§è¡Œè®­ç»ƒä»»åŠ¡                                 â”‚   â”‚
â”‚  â”‚    python train.py task1 â†’ stdout/stderr â”€â”        â”‚   â”‚
â”‚  â”‚    python train.py task2 â†’ stdout/stderr  â”œâ”€â”€â”€â”€â”€>  â”‚   â”‚
â”‚  â”‚    python train.py task3 â†’ stdout/stderr â”€â”˜        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â”‚                          â†“                                  â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚  â”‚ 4. ç»Ÿä¸€æ—¥å¿—æ–‡ä»¶: ${BATCH_NAME}.log                 â”‚   â”‚
â”‚  â”‚    âœ… åŒ…å«æ‰€æœ‰ä»»åŠ¡çš„å®Œæ•´è¾“å‡º                        â”‚   â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ” è¯¦ç»†åˆ†æ

### 1ï¸âƒ£ è„šæœ¬å¯åŠ¨é˜¶æ®µçš„æ—¥å¿—

**è¾“å‡ºä½ç½®ï¼šç»ˆç«¯ï¼ˆå‰å°ï¼Œç”¨æˆ·å¯è§ï¼‰**

```bash
# è¿™éƒ¨åˆ†ç›´æ¥è¾“å‡ºåˆ°ç»ˆç«¯ï¼Œä¸è¿›å…¥æ—¥å¿—æ–‡ä»¶
echo "========================================="
echo "[$(date '+%F %T')] å¯åŠ¨æ‰¹é‡ä¸²è¡Œè®­ç»ƒ"
echo "æ‰¹é‡åç§°ï¼š${BATCH_NAME}"
echo "è®­ç»ƒä»»åŠ¡æ•°ï¼š${#TASKS[@]}"
echo "æ—¥å¿—æ–‡ä»¶ï¼š${LOG_FILE}"
# ... æ›´å¤šä¿¡æ¯
```

**ç‰¹ç‚¹ï¼š**
- âœ… ç«‹å³æ˜¾ç¤ºåœ¨ç»ˆç«¯
- âŒ **ä¸ä¼š**å†™å…¥æ—¥å¿—æ–‡ä»¶
- ğŸ¯ ç›®çš„ï¼šå‘Šè¯‰ç”¨æˆ·è„šæœ¬å·²å¯åŠ¨ï¼Œä»»åŠ¡é…ç½®æ­£ç¡®

**ç¤ºä¾‹è¾“å‡ºï¼š**
```
=========================================
[2025-11-12 14:30:25] å¯åŠ¨æ‰¹é‡ä¸²è¡Œè®­ç»ƒ
=========================================
æ‰¹é‡åç§°ï¼šlr_compare
è®­ç»ƒä»»åŠ¡æ•°ï¼š2
æ—¥å¿—æ–‡ä»¶ï¼š./lr_compare.log

è®­ç»ƒä»»åŠ¡åˆ—è¡¨ï¼š
  [1] python train.py --name lr0.001 --lr0 0.001 --epochs 100
  [2] python train.py --name lr0.0005 --lr0 0.0005 --epochs 100
```

---

### 2ï¸âƒ£ ä¸´æ—¶è„šæœ¬çš„ç”Ÿæˆ

**ä¸´æ—¶è„šæœ¬ä½ç½®ï¼š** `/tmp/yolo_batch_${BATCH_NAME}_$$.sh`

```bash
cat > "$TEMP_SCRIPT" << EOFSCRIPT
#!/usr/bin/env bash
set -euo pipefail

echo "========================================="
echo "[å¼€å§‹æ—¶é—´] \$(date '+%F %T')"
echo "æ‰¹é‡è®­ç»ƒï¼š${BATCH_NAME}"
echo "========================================="

# ğŸ”¥ æ ¸å¿ƒï¼šä¸²è¡Œæ‰§è¡Œæ‰€æœ‰è®­ç»ƒä»»åŠ¡
$TRAIN_COMMANDS

EXIT_CODE=\$?

echo ""
echo "========================================="
echo "[ç»“æŸæ—¶é—´] \$(date '+%F %T')"
if [[ \$EXIT_CODE -eq 0 ]]; then
    echo "âœ… æ‰¹é‡è®­ç»ƒå…¨éƒ¨å®Œæˆï¼š${BATCH_NAME}"
else
    echo "âŒ æ‰¹é‡è®­ç»ƒå¤±è´¥ï¼Œé€€å‡ºç ï¼š\$EXIT_CODE"
fi
echo "========================================="

exit \$EXIT_CODE
EOFSCRIPT
```

**ç‰¹ç‚¹ï¼š**
- è¿™æ˜¯ä¸€ä¸ª**ä¸´æ—¶æ–‡ä»¶**ï¼ŒåŠ¨æ€ç”Ÿæˆ
- åŒ…å«æ‰€æœ‰è®­ç»ƒä»»åŠ¡çš„ä¸²è¡Œå‘½ä»¤
- è„šæœ¬æ‰§è¡Œå®Œä¼šè‡ªåŠ¨åˆ é™¤

---

### 3ï¸âƒ£ åå°è¿›ç¨‹çš„æ—¥å¿—é‡å®šå‘ï¼ˆæ ¸å¿ƒæœºåˆ¶ï¼‰

**å…³é”®ä»£ç ï¼š**
```bash
nohup bash -c "$TEMP_SCRIPT && rm -f $TEMP_SCRIPT || (rm -f $TEMP_SCRIPT; exit 1)" > "${LOG_FILE}" 2>&1 &
#     ^       ^                                                                      ^               ^    ^
#     |       |                                                                      |               |    |
#     |       |                                                                      |               |    åå°è¿è¡Œ
#     |       |                                                                      |               é”™è¯¯ä¹Ÿé‡å®šå‘
#     |       |                                                                      æ ‡å‡†è¾“å‡ºé‡å®šå‘
#     |       æ‰§è¡Œä¸´æ—¶è„šæœ¬
#     é˜²æ­¢ç»ˆç«¯å…³é—­æ—¶è¿›ç¨‹ç»ˆæ­¢
```

**é€æ­¥è§£æï¼š**

#### `nohup`
- **ä½œç”¨**ï¼šè®©è¿›ç¨‹å¿½ç•¥ SIGHUP ä¿¡å·ï¼ˆç»ˆç«¯å…³é—­ä¿¡å·ï¼‰
- **æ•ˆæœ**ï¼šå³ä½¿å…³é—­ç»ˆç«¯ï¼Œè®­ç»ƒä¹Ÿä¼šç»§ç»­

#### `bash -c "$TEMP_SCRIPT"`
- **ä½œç”¨**ï¼šåœ¨æ–°çš„ bash è¿›ç¨‹ä¸­æ‰§è¡Œä¸´æ—¶è„šæœ¬
- **å†…å®¹**ï¼šä¸´æ—¶è„šæœ¬åŒ…å«æ‰€æœ‰ä¸²è¡Œè®­ç»ƒå‘½ä»¤

#### `> "${LOG_FILE}"`
- **ä½œç”¨**ï¼šå°†**æ ‡å‡†è¾“å‡º (stdout)** é‡å®šå‘åˆ°æ—¥å¿—æ–‡ä»¶
- **è¦†ç›–**ï¼šå¦‚æœæ—¥å¿—æ–‡ä»¶å·²å­˜åœ¨ï¼Œä¼šè¢«è¦†ç›–

#### `2>&1`
- **ä½œç”¨**ï¼šå°†**æ ‡å‡†é”™è¯¯ (stderr)** ä¹Ÿé‡å®šå‘åˆ°æ ‡å‡†è¾“å‡º
- **æ•ˆæœ**ï¼šstdout å’Œ stderr éƒ½å†™å…¥åŒä¸€ä¸ªæ—¥å¿—æ–‡ä»¶

#### `&`
- **ä½œç”¨**ï¼šå°†æ•´ä¸ªå‘½ä»¤æ”¾åˆ°åå°æ‰§è¡Œ
- **æ•ˆæœ**ï¼šè„šæœ¬ç«‹å³è¿”å›ï¼Œç”¨æˆ·å¯ä»¥ç»§ç»­ä½¿ç”¨ç»ˆç«¯

---

### 4ï¸âƒ£ Python train.py çš„æ—¥å¿—è¾“å‡º

**é‡è¦ï¼æ¯ä¸ª `python train.py` çš„è¾“å‡ºéƒ½ä¼šè‡ªåŠ¨æµå…¥ç»Ÿä¸€æ—¥å¿—æ–‡ä»¶**

#### æ—¥å¿—æ¥æº

```python
# train.py ä¸­çš„æ‰€æœ‰è¾“å‡ºéƒ½ä¼šè¿›å…¥æ—¥å¿—
print("YAML æ–‡ä»¶æ­£æ–‡å¦‚ä¸‹ï¼š\n" + yaml_content)  # âœ… ä¼šè¿›å…¥æ—¥å¿—
print(f"Training complete. Results saved to: {save_dir}")  # âœ… ä¼šè¿›å…¥æ—¥å¿—

# Ultralytics åº“çš„è¾“å‡ºä¹Ÿä¼šè¿›å…¥æ—¥å¿—
model.train(...)  # âœ… è®­ç»ƒè¿‡ç¨‹çš„æ‰€æœ‰è¾“å‡ºéƒ½ä¼šè¿›å…¥æ—¥å¿—
```

#### Ultralytics è‡ªå·±çš„æ—¥å¿—

**é‡è¦è¯´æ˜ï¼š** Ultralytics é™¤äº†ç»ˆç«¯è¾“å‡ºï¼Œè¿˜ä¼šåœ¨è®­ç»ƒç›®å½•åˆ›å»ºç‹¬ç«‹æ—¥å¿—ï¼š

```
runs/train/
â”œâ”€â”€ lr0.001/                  # ä»»åŠ¡1çš„ç»“æœç›®å½•
â”‚   â”œâ”€â”€ weights/
â”‚   â”œâ”€â”€ results.csv           # âœ… è®­ç»ƒæŒ‡æ ‡
â”‚   â”œâ”€â”€ results.png           # âœ… æŒ‡æ ‡å¯è§†åŒ–
â”‚   â””â”€â”€ train_batch*.jpg      # âœ… è®­ç»ƒæ ·æœ¬å¯è§†åŒ–
â””â”€â”€ lr0.0005/                 # ä»»åŠ¡2çš„ç»“æœç›®å½•
    â”œâ”€â”€ weights/
    â”œâ”€â”€ results.csv
    â””â”€â”€ ...
```

---

## ğŸ“ å®Œæ•´çš„æ—¥å¿—æ–‡ä»¶ç»“æ„

å‡è®¾ä½ è¿è¡Œï¼š
```bash
./run_yolo_batch.sh lr_compare \
    --name lr0.001 --lr0 0.001 --epochs 100 -- \
    --name lr0.0005 --lr0 0.0005 --epochs 100
```

### ç”Ÿæˆçš„æ—¥å¿—æ–‡ä»¶ï¼š`lr_compare.log`

```
=========================================
[å¼€å§‹æ—¶é—´] 2025-11-12 14:30:26
æ‰¹é‡è®­ç»ƒï¼šlr_compare
=========================================

# ========== ä»»åŠ¡ 1 å¼€å§‹ ==========

YAML æ–‡ä»¶æ­£æ–‡å¦‚ä¸‹ï¼š
# Ultralytics YOLO ğŸš€, AGPL-3.0 license
...

Ultralytics YOLO11s summary: ...
from n params module ...
...

Epoch    GPU_mem    box_loss    cls_loss    dfl_loss  Instances       Size
1/100      3.45G      1.234       0.567       1.123         45        640: 100%|â–ˆâ–ˆ| 50/50 [00:25<00:00]
...
100/100    3.45G      0.234       0.067       0.223         45        640: 100%|â–ˆâ–ˆ| 50/50 [00:25<00:00]

Training complete. Results saved to: runs/train/lr0.001

# ========== ä»»åŠ¡ 1 å®Œæˆï¼Œä»»åŠ¡ 2 å¼€å§‹ ==========

YAML æ–‡ä»¶æ­£æ–‡å¦‚ä¸‹ï¼š
...

Epoch    GPU_mem    box_loss    cls_loss    dfl_loss  Instances       Size
1/100      3.45G      1.456       0.678       1.234         45        640: 100%|â–ˆâ–ˆ| 50/50 [00:25<00:00]
...
100/100    3.45G      0.198       0.054       0.201         45        640: 100%|â–ˆâ–ˆ| 50/50 [00:25<00:00]

Training complete. Results saved to: runs/train/lr0.0005

=========================================
[ç»“æŸæ—¶é—´] 2025-11-12 18:45:33
âœ… æ‰¹é‡è®­ç»ƒå…¨éƒ¨å®Œæˆï¼šlr_compare
=========================================
```

---

## ğŸ”§ æ—¥å¿—æ§åˆ¶çš„å…³é”®ç‚¹

### âœ… ä¼˜ç‚¹

1. **ç»Ÿä¸€ç®¡ç†**
   - æ‰€æœ‰ä»»åŠ¡çš„è¾“å‡ºéƒ½åœ¨ä¸€ä¸ªæ–‡ä»¶ä¸­
   - ä¾¿äºå¯¹æ¯”ä¸åŒä»»åŠ¡çš„è¾“å‡º

2. **å®Œæ•´è®°å½•**
   - åŒ…å«æ‰€æœ‰ `print()` è¾“å‡º
   - åŒ…å«æ‰€æœ‰é”™è¯¯ä¿¡æ¯
   - åŒ…å«è®­ç»ƒè¿›åº¦æ¡

3. **å¯è¿½æº¯**
   - æœ‰æ˜ç¡®çš„å¼€å§‹å’Œç»“æŸæ—¶é—´æˆ³
   - å¯ä»¥çœ‹åˆ°ä»»åŠ¡æ‰§è¡Œé¡ºåº

### âš ï¸ æ½œåœ¨é—®é¢˜

1. **æ—¥å¿—æ–‡ä»¶å¯èƒ½å¾ˆå¤§**
   - å¤šä¸ªä»»åŠ¡çš„è¾“å‡ºç´¯ç§¯
   - å»ºè®®å®šæœŸæ¸…ç†æ—§æ—¥å¿—

2. **æ— æ³•åŒºåˆ†ä»»åŠ¡è¾¹ç•Œ**
   - å¦‚æœ `train.py` æ²¡æœ‰æ˜æ˜¾çš„å¼€å§‹/ç»“æŸæ ‡è®°
   - å¯èƒ½éš¾ä»¥æ‰¾åˆ°æŸä¸ªä»»åŠ¡çš„è¾“å‡º

---

## ğŸ’¡ æ”¹è¿›å»ºè®®

### æ”¹è¿› 1ï¼šåœ¨æ¯ä¸ªä»»åŠ¡å‰åæ·»åŠ æ˜æ˜¾åˆ†éš”ç¬¦

ä¿®æ”¹ä¸´æ—¶è„šæœ¬ç”Ÿæˆéƒ¨åˆ†ï¼š

```bash
# æ„å»ºä¸²è¡Œè®­ç»ƒå‘½ä»¤ï¼ˆç”¨ && è¿æ¥ï¼‰
TRAIN_COMMANDS=""
for i in "${!TASKS[@]}"; do
    TASK_NUM=$((i + 1))
    TASK_ARGS="${TASKS[$i]}"
    
    # æå–ä»»åŠ¡åç§°ï¼ˆç”¨äºæ—¥å¿—æ ‡è®°ï¼‰
    TASK_NAME=$(echo "$TASK_ARGS" | grep -oP '(?<=--name )[^ ]+' || echo "task_$TASK_NUM")
    
    # æ·»åŠ ä»»åŠ¡å¼€å§‹æ ‡è®°
    TASK_CMD="echo ''; echo '=========================================='; echo 'ğŸš€ ä»»åŠ¡ $TASK_NUM å¼€å§‹: $TASK_NAME'; echo 'å¼€å§‹æ—¶é—´: '\$(date '+%F %T'); echo '=========================================='; echo ''"
    
    # æ·»åŠ è®­ç»ƒå‘½ä»¤
    TASK_CMD="$TASK_CMD && python train.py $TASK_ARGS"
    
    # æ·»åŠ ä»»åŠ¡ç»“æŸæ ‡è®°
    TASK_CMD="$TASK_CMD && echo '' && echo 'âœ… ä»»åŠ¡ $TASK_NUM å®Œæˆ: $TASK_NAME' && echo 'ç»“æŸæ—¶é—´: '\$(date '+%F %T') && echo '=========================================='"
    
    # è¿æ¥åˆ°æ€»å‘½ä»¤
    if [[ $i -eq 0 ]]; then
        TRAIN_COMMANDS="$TASK_CMD"
    else
        TRAIN_COMMANDS="$TRAIN_COMMANDS && $TASK_CMD"
    fi
done
```

### æ”¹è¿› 2ï¼šä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºå•ç‹¬çš„æ—¥å¿—æ–‡ä»¶

åŒæ—¶ä¿ç•™ç»Ÿä¸€æ—¥å¿—å’Œç‹¬ç«‹æ—¥å¿—ï¼š

```bash
# ä¿®æ”¹å‘½ä»¤æ„å»º
for i in "${!TASKS[@]}"; do
    TASK_NUM=$((i + 1))
    TASK_ARGS="${TASKS[$i]}"
    TASK_NAME=$(echo "$TASK_ARGS" | grep -oP '(?<=--name )[^ ]+' || echo "task_$TASK_NUM")
    
    # ä¸ºæ¯ä¸ªä»»åŠ¡åˆ›å»ºç‹¬ç«‹æ—¥å¿—ï¼ŒåŒæ—¶è¾“å‡ºåˆ°ç»Ÿä¸€æ—¥å¿—
    TASK_LOG="${BATCH_NAME}_${TASK_NAME}.log"
    TASK_CMD="python train.py $TASK_ARGS 2>&1 | tee $TASK_LOG"
    
    if [[ $i -eq 0 ]]; then
        TRAIN_COMMANDS="$TASK_CMD"
    else
        TRAIN_COMMANDS="$TRAIN_COMMANDS && $TASK_CMD"
    fi
done
```

---

## ğŸ¯ å®é™…ä½¿ç”¨ç¤ºä¾‹

### æŸ¥çœ‹å®æ—¶æ—¥å¿—
```bash
# æŸ¥çœ‹æœ€æ–° 20 è¡Œ
tail -n 20 lr_compare.log

# å®æ—¶è·Ÿè¸ªæ—¥å¿—ï¼ˆæ¨èï¼‰
tail -f lr_compare.log

# æœç´¢ç‰¹å®šå†…å®¹
grep "Epoch" lr_compare.log
grep "Training complete" lr_compare.log
grep "Error" lr_compare.log

# æŸ¥çœ‹ä»»åŠ¡å®Œæˆæƒ…å†µ
grep "âœ…" lr_compare.log
```

### æ£€æŸ¥è®­ç»ƒæ˜¯å¦è¿˜åœ¨è¿è¡Œ
```bash
# æ–¹æ³•1ï¼šæ£€æŸ¥è¿›ç¨‹
ps aux | grep train.py

# æ–¹æ³•2ï¼šæ£€æŸ¥æ—¥å¿—æ˜¯å¦è¿˜åœ¨æ›´æ–°
watch -n 5 'ls -lh lr_compare.log'

# æ–¹æ³•3ï¼šæŸ¥çœ‹GPUä½¿ç”¨æƒ…å†µ
watch -n 1 nvidia-smi
```

### åˆ†ææ—¥å¿—
```bash
# æå–æ‰€æœ‰ epoch çš„ loss
grep "Epoch" lr_compare.log | grep "box_loss"

# æŸ¥çœ‹è®­ç»ƒå¼€å§‹å’Œç»“æŸæ—¶é—´
grep "æ—¶é—´" lr_compare.log

# ç»Ÿè®¡æ€»è®­ç»ƒæ—¶é—´
head -n 1 lr_compare.log && tail -n 1 lr_compare.log
```

---

## ğŸ†š ä¸å…¶ä»–æ—¥å¿—æ–¹æ¡ˆå¯¹æ¯”

| æ–¹æ¡ˆ | ç»Ÿä¸€æ—¥å¿— | ç‹¬ç«‹æ—¥å¿— | å®æ—¶æŸ¥çœ‹ | ä¾¿äºè°ƒè¯• |
|------|---------|---------|---------|---------|
| **å½“å‰æ–¹æ¡ˆ** (å•ä¸€æ—¥å¿—) | âœ… | âŒ | âœ… | âš ï¸ |
| **æ”¹è¿›æ–¹æ¡ˆ1** (æ·»åŠ åˆ†éš”ç¬¦) | âœ… | âŒ | âœ… | âœ… |
| **æ”¹è¿›æ–¹æ¡ˆ2** (ç‹¬ç«‹+ç»Ÿä¸€) | âœ… | âœ… | âœ… | âœ… |
| ä¸ç”¨æ—¥å¿—ï¼ˆçº¯ç»ˆç«¯ï¼‰ | âŒ | âŒ | âœ… | âŒ |

---

## ğŸ“‹ æ€»ç»“

### å½“å‰æ—¥å¿—æœºåˆ¶
1. **è„šæœ¬å¯åŠ¨ä¿¡æ¯** â†’ ç»ˆç«¯æ˜¾ç¤ºï¼ˆä¸è¿›æ—¥å¿—ï¼‰
2. **åå°è¿›ç¨‹è¾“å‡º** â†’ é€šè¿‡ `nohup ... > log 2>&1` é‡å®šå‘
3. **æ‰€æœ‰ Python è¾“å‡º** â†’ è‡ªåŠ¨æµå…¥ç»Ÿä¸€æ—¥å¿—æ–‡ä»¶
4. **Ultralytics ç‹¬ç«‹æ—¥å¿—** â†’ åœ¨ `runs/train/<name>/` ç›®å½•ä¸‹

### å…³é”®å‘½ä»¤
```bash
# é‡å®šå‘é­”æ³•
nohup command > file.log 2>&1 &
#               ^         ^    ^
#               |         |    åå°è¿è¡Œ
#               |         stderré‡å®šå‘åˆ°stdout
#               stdouté‡å®šå‘åˆ°æ–‡ä»¶
```

### æœ€ä½³å®è·µ
- âœ… ä½¿ç”¨ `tail -f` å®æ—¶ç›‘æ§è®­ç»ƒ
- âœ… å®šæœŸæ£€æŸ¥æ—¥å¿—æ–‡ä»¶å¤§å°
- âœ… è®­ç»ƒå®Œæˆåå½’æ¡£æ—¥å¿—
- âœ… ç»“åˆ `runs/train/*/results.csv` åˆ†æç»“æœ

